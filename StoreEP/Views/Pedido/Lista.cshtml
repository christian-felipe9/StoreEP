@model PedidoListaViewModel
@{
    ViewBag.Title = "Pedidos";
    Layout = "_AdminLayout";
}

@foreach (Pedido pedido in Model.Pedidos)
{
    <table class="table table-bordered table-striped">
        <tr>
            <th>Pedido</th>
            <th>Rua</th>
            <th>Número</th>
            <th>Bairro</th>
            <th>Cidede</th>
            <th>CEP</th>
            <th>Status</th>
            <th>Data da compra</th>
        </tr>
        <tr>
            <td>@pedido.PedidoId</td>
            <td>@pedido?.Endereco.EnderecoId</td>
            @*<td>@Model.Enderecos.Where(e => e.EnderecoId == pedido.Endereco.EnderecoId).Select(e => e.Rua).FirstOrDefault()</td>
            <td>@Model.Enderecos.Where(e => e.EnderecoId == pedido.Endereco.EnderecoId).Select(e => e.Numero).FirstOrDefault()</td>
            <td>@Model.Enderecos.Where(e => e.EnderecoId == pedido.Endereco.EnderecoId).Select(e => e.Bairro).FirstOrDefault()</td>
            <td>@Model.Enderecos.Where(e => e.EnderecoId == pedido.Endereco.EnderecoId).Select(e => e.Cidade).FirstOrDefault()</td>
            <td>@Model.Enderecos.Where(e => e.EnderecoId == pedido.Endereco.EnderecoId).Select(e => e.CEP).FirstOrDefault()</td>*@
            @if (pedido.Shipped)
                {
                <td>Enviado</td>
            }
            else
            {
                <td>Não Enviado</td>
            }
            <td>@pedido.DataCompra</td>
        </tr>
        <tr>
            <th colspan="1"></th>
            <th>Nome</th>
            <th>Preço</th>
            <th>Categoria</th>
        </tr>
        @foreach (var produto in pedido.Lines)
                {
            <tr>
                <td></td>
                <td><a asp-action="Detalhes" asp-controller="Produtos" asp-route-ID="@produto.Produto.ID">@produto?.Produto?.Nome</a></td>
                <td>@produto?.Produto?.Preco.ToString("c")</td>
                <td>@produto?.Produto?.Categoria</td>
            </tr>
        }
    </table>
}

